import { getSession } from "next-auth/react";

export async function apiFetch(url: string, init: RequestInit = {}) {
  const session = await getSession();
  const userId = (session as any)?.userId || "demo";

  const headers = new Headers(init.headers || {});
  headers.set("x-user-id", String(userId));

  return fetch(url, { ...init, headers });
}
